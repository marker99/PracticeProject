@page "/editRelationComponent/{Id:int}"

@using PracticeProject.Data
@using PracticeProject.Models
@using PracticeProject.Resources
@using Microsoft.Data.SqlClient
@using System.Diagnostics

<RadzenTemplateForm Data="@_relation">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div class="container-fluid">
        <div class="row">
            <h3>Relation Information</h3>
            <div class="col-md-10">
                <RadzenFieldset>
                    <div class="row">
                        <div class="col-md-3 align-items-center d-flex">
                            <RadzenLabel Text="Person 1 Name" />
                        </div>
                        <div class="col-md-7">
                            <RadzenDropDown Style="width: 100%" Disabled="true" TValue="int" Data="@_persons" TextProperty="FirstName" ValueProperty="PersonId" @bind-Value="@_relation.PersonId1" />
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-3 align-items-center d-flex">
                            <RadzenLabel Text="@StringResource.Relation" />
                        </div>
                        <div class="col-md-7">
                            <RadzenTextBox Style="width: 100%" @bind-Value="_relation.RelationType" Name="Relation" />
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-3 align-items-center d-flex">
                            <RadzenLabel Text="Person 2 Name" />
                        </div>
                        <div class="col-md-7">
                            <RadzenDropDownDataGrid Style="width: 100%" AllowClear="true" PageSize="8" AllowFiltering="true" FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                                                    TValue="int" Data="@_persons" TextProperty="Person" ValueProperty="PersonId" @bind-Value="@_relation.PersonId2">
                                <Columns>
                                    <RadzenDropDownDataGridColumn Property="FirstName" Title="@StringResource.FirstName" />
                                    <RadzenDropDownDataGridColumn Property="LastName" Title="@StringResource.LastName" />
                                    <RadzenDropDownDataGridColumn Property="Gender" Title="@StringResource.Gender" Width="80px" />
                                    <RadzenDropDownDataGridColumn Property="Age" Title="@StringResource.Age" Width="65px" />
                                </Columns>
                            </RadzenDropDownDataGrid>
                        </div>
                    </div>
                </RadzenFieldset>

            </div>
            <div class="row ">
                <div class="col-md-10 d-flex align-items-end justify-content-center" style="margin-top: 16px;">
                    <RadzenButton class="button_green_colour" ButtonType="ButtonType.Submit" Icon="save" Text="Save" Click="@UpdateRelation" />
                    <RadzenButton ButtonStyle="ButtonStyle.Light" Icon="cancel" style="display: inline-block; margin-left: 10px;" Text="Cancel" Click="@Cancel" />
                </div>
            </div>
        </div>
    </div>
</RadzenTemplateForm>
